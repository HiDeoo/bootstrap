---
import type { HTMLAttributes } from 'astro/types'
import { getConfig, getVersionedBsJsPath } from '../libs/config'
import type { Layout } from '../libs/layout'
import StackBlitz from '../components/StackBlitz.astro'

interface Props {
  layout: Layout
}

const { layout } = Astro.props

const bsJsLinkProps: HTMLAttributes<'script'> = {
  src: getVersionedBsJsPath(),
}

if (import.meta.env.PROD) {
  bsJsLinkProps.crossorigin = 'anonymous'
  bsJsLinkProps.integrity = getConfig().params.cdn.js_bundle_hash
}
---

<script is:inline {...bsJsLinkProps}></script>

{
  layout === 'docs' && (
    <>
      <script is:inline src="https://cdn.jsdelivr.net/npm/@docsearch/js@3" />
      <StackBlitz />
    </>
  )
}

<script src="../assets/application.js"></script>
<script src="../assets/search.js"></script>
<script src="../assets/snippets.js"></script>
