---
import type { Layout } from '../../libs/layout'

interface Props {
  layout: Layout
}

const { layout } = Astro.props
---

{layout === 'docs' && <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />}

<!--TODO: REMOVE ME don't use the CDN!!! -->
<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
  rel="stylesheet"
  integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
  crossorigin="anonymous"
/>

<!--TODO: handle all elements right after -->
<!--
{{ if eq hugo.Environment "production" -}}
{{ if eq .Page.Params.direction "rtl" -}}
TODO(HiDeoo) This should prolly use getVersionedDocsPath()
<link href="/docs/{{ .Site.Params.docs_version }}/dist/css/bootstrap.rtl.min.css" rel="stylesheet" {{ printf "integrity=%q" .Site.Params.cdn.css_rtl_hash | safeHTMLAttr }} crossorigin="anonymous">
{{- else -}}
TODO(HiDeoo) This should prolly use getVersionedDocsPath()
<link href="/docs/{{ .Site.Params.docs_version }}/dist/css/bootstrap.min.css" rel="stylesheet" {{ printf "integrity=%q" .Site.Params.cdn.css_hash | safeHTMLAttr }} crossorigin="anonymous">
{{- end -}}
{{- else -}}
TODO(HiDeoo) This should prolly use getVersionedDocsPath()
<link href="/docs/{{ .Site.Params.docs_version }}/dist/css/bootstrap{{ if eq .Page.Params.direction "rtl" }}.rtl{{ end }}.css" rel="stylesheet">
{{- end }}

{{- if (ne .Page.Layout "examples") }}
TODO(HiDeoo) This should prolly use getVersionedDocsPath()
{{- $targetDocsCssPath := path.Join "/docs" .Site.Params.docs_version "assets/css/docs.css" -}}
{{- $sassOptions := dict "targetPath" $targetDocsCssPath "outputStyle" "expanded" "precision" 6 -}}
{{- $postcssOptions := dict "use" "autoprefixer" "noMap" true -}}
TODO(HiDeoo) The current import of the style does not respect any of the config below, figure out if we can port it back
to the Astro implementation or we need to move out the stylesheets processing to a custom adapter.
{{ if eq hugo.Environment "production" -}}
  {{- $sassOptions = merge $sassOptions (dict "outputStyle" "compressed") -}}
{{- end -}}

{{- $style := resources.Get "scss/docs.scss" | toCSS $sassOptions | postCSS $postcssOptions }}

<link href="{{ $style.Permalink | relURL }}" rel="stylesheet">
{{- end }}
-->

<!-- TODO(HiDeoo) See todo above regarding style imports -->
<style lang="scss">
  @import '../../scss/docs';
</style>
